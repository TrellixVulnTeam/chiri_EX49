"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPackageJSON = void 0;
const path_1 = __importDefault(require("path"));
const log_1 = require("./log");
exports.getPackageJSON = () => {
    const packageJSON = require(path_1.default.join(process.cwd(), "package.json"));
    if (!packageJSON) {
        log_1.logError(`The folder ${process.cwd} does not have a package.json. cs-npm-s3 needs to run on a package folder`);
        process.exit(1);
    }
    const { name, repository, description } = packageJSON;
    if (!name.startsWith('@cornershop/')) {
        log_1.logError(`ðŸš«  "${name}" is not a valid name for a cornershop package. Please change the name of your package to "@cornershop/<package_name>".`);
        process.exit(1);
    }
    if (description == null || description === "") {
        log_1.logError(`ðŸš«  description field is required in the package.json.`);
        process.exit(1);
    }
    if (repository == null || repository.url == null || repository.url === "") {
        log_1.logError(`ðŸš«  repository.url field is required in the package.json. More info: https://docs.npmjs.com/cli/v7/configuring-npm/package-json#repository`);
        process.exit(1);
    }
    return packageJSON;
};
//# sourceMappingURL=getPackageJSON.js.map