"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const cli_1 = require("@stencil/core/cli");
const stencil_runtime_1 = require("../stencil-runtime");
const stencil_parameters_1 = require("../stencil-runtime/stencil-parameters");
function createStencilCompilerOptions(taskCommand, options) {
    let runOptions = [taskCommand];
    runOptions.push(`--spec`);
    runOptions = stencil_parameters_1.parseRunParameters(runOptions, options);
    return cli_1.parseFlags(runOptions);
}
function runExecutor(options, context) {
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
        const taskCommand = 'test';
        const { config, pathCollection } = yield stencil_runtime_1.initializeStencilConfig(taskCommand, options, context, createStencilCompilerOptions);
        const stencilConfig = yield stencil_runtime_1.prepareConfigAndOutputargetPaths(config, pathCollection);
        return yield stencil_runtime_1.createStencilProcess(stencilConfig, pathCollection);
    });
}
exports.default = runExecutor;
//# sourceMappingURL=builder.js.map