"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const devkit_1 = require("@nrwl/devkit");
const migration_utils_1 = require("../utils/migration-utils");
const workspace_1 = require("@nrwl/workspace");
function update(host) {
    workspace_1.updatePackagesInPackageJson(devkit_1.joinPathFragments(__dirname, '../../../', 'migrations.json'), '12.0.0');
    const projects = devkit_1.getProjects(host);
    projects.forEach((project, name) => {
        if (migration_utils_1.isStencilProject(project)) {
            ['e2e', 'serve', 'test', 'build'].forEach(target => {
                if (project.targets[target] && project.targets[target].options.outputPath === undefined) {
                    project.targets[target].options.outputPath = `dist/${project.root}`;
                }
            });
            devkit_1.updateProjectConfiguration(host, name, project);
        }
    });
}
exports.default = update;
//# sourceMappingURL=update-12-0-7.js.map